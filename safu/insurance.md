# Insurance mechanism

Astrolab's Crates insurance is funded by $ASL's staking yield. 

$ASL staking pools earn a share of the performance fees generated by the underlying crates. Each pool has a distinct risk level, which allows stackers to choose their risk exposure. If an unexpected loss happens, a share of the tokens staked is locked, and the fees associated will go to the affected crate, healing it over time. 

Locked tokens are returned to their owners after the loss has been compensated, or if a predefined amount of time has passed.



(TODO: improve this chart)
![insurance flow chart](/media/asl-insurance-flow.png)

---

*Example*:

"Aggressive" $ASL staking pool insures CrateA, CrateB and CrateC. Kaneda has staked 100k $ASL in it, which earns him 50k$ in DAI per year. The pool has 1M $ASL and earns 500k$ per year on average.

One of the strategies of CrateA has an unexpected loss. The Aave fork it was investing in had a faulty oracle, and 100k$ funds are lost, which is 5% of the total managed by the Crate. Share price and market price for the Crate token immediately decrease by 5%.

50% of the pool's tokens are locked, and their associated revenue is sent to CrateA. After 4 months and 24 days, 100k$ have been sent to the crate and Kaneda can unlock his tokens.

---

This mechanism protects the $ASL value and the stacker's holdings by avoiding auctioning tokens on the market as Aave does. Because the affected crate will now get a new income stream, its APR will increase, making it more attractive to new users. Compensation isn't done immediately, it is however scalable by ensuring crates can be made whole.

Events covered are the following:
- Oracle malfunctioning
- Bad debt on one the Crate's strategies
- Bug, or malfunction of the Crate or one of the Crate's strategies
- Theft of funds locked in the contract

Parameters used to compute the compensation schedule and the events covered are defined by governance, to keep the balance between staking incentives and protocol de-risking.